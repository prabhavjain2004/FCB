{% extends 'base.html' %}
{% load static %}

{% block title %}
  Cafe Owner Login - TapNex Arena
{% endblock %}

{% block content %}
  <!-- Professional Background -->
  <div class="login-page-wrapper">
    <div class="min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative z-10">
      <div class="sm:mx-auto sm:w-full sm:max-w-md">
        <!-- Header -->
        <div class="text-center mb-8">
          <div class="icon-wrapper mx-auto">
            <div class="icon-container cafe-owner-icon">
              <i class="fas fa-briefcase"></i>
            </div>
          </div>
          <h2 class="page-title">Cafe Owner Portal</h2>
          <p class="page-subtitle">Manage your gaming cafe operations with ease</p>
        </div>
      </div>

      <!-- Centered Form Container -->
      <div class="flex justify-center px-4">
        <div class="w-full max-w-md">
          <div class="login-card">
            <div class="card-shine"></div>

            <!-- Messages -->
            {% if messages %}
              <div class="mb-6">
                {% for message in messages %}
                  <div class="alert-message {% if message.tags == 'error' %}
                      
                      alert-error

                    {% else %}
                      
                      alert-success

                    {% endif %}">
                    <div class="alert-icon">
                      <i class="fas {% if message.tags == 'error' %}
                          
                          fa-exclamation-circle

                        {% else %}
                          
                          fa-check-circle

                        {% endif %}">

                      </i>
                    </div>
                    <p class="alert-text">{{ message }}</p>
                  </div>
                {% endfor %}
              </div>
            {% endif %}

            <!-- Form -->
            <form class="space-y-6" method="post" id="login-form">
              {% csrf_token %}

              <!-- Username Field -->
              <div class="form-group">
                <label for="{{ form.username.id_for_label }}" class="form-label">
                  <i class="fas fa-user label-icon"></i>
                  {{ form.username.label }}
                </label>
                <div class="input-wrapper">
                  <input id="{{ form.username.id_for_label }}" name="{{ form.username.name }}" type="text" autocomplete="username" required class="form-input" placeholder="Enter your username" value="{{ form.username.value|default:'' }}" />
                  <div class="input-focus-ring"></div>
                </div>
                {% if form.username.errors %}
                  <p class="form-error">
                    <i class="fas fa-exclamation-circle"></i>
                    {{ form.username.errors.0 }}
                  </p>
                {% endif %}
              </div>

              <!-- Password Field -->
              <div class="form-group">
                <label for="{{ form.password.id_for_label }}" class="form-label">
                  <i class="fas fa-lock label-icon"></i>
                  {{ form.password.label }}
                </label>
                <div class="input-wrapper">
                  <input id="{{ form.password.id_for_label }}" name="{{ form.password.name }}" type="password" autocomplete="current-password" required class="form-input" placeholder="Enter your password" />
                  <button type="button" class="password-toggle-btn" onclick="togglePassword()" tabindex="-1" aria-label="Toggle password visibility"><i class="fas fa-eye" id="toggleIcon"></i></button>
                  <div class="input-focus-ring"></div>
                </div>
                {% if form.password.errors %}
                  <p class="form-error">
                    <i class="fas fa-exclamation-circle"></i>
                    {{ form.password.errors.0 }}
                  </p>
                {% endif %}
              </div>

              <!-- Form-wide errors -->
              {% if form.non_field_errors %}
                <div class="alert-message alert-error">
                  <div class="alert-icon">
                    <i class="fas fa-exclamation-circle"></i>
                  </div>
                  <p class="alert-text">{{ form.non_field_errors.0 }}</p>
                </div>
              {% endif %}

              <!-- Submit Button -->
              <div class="pt-4">
                <button type="submit" id="submit-btn" class="submit-button">
                  <i class="fas fa-sign-in-alt"></i>
                  Access Dashboard<div class="button-shine"></div>
                </button>
              </div>
            </form>

            <!-- Registration Link -->
            <div class="signup-prompt">
              <p>
                Need an account?
                <a href="{% url 'authentication:cafe_owner_register' %}" class="signup-link">Register here</a>
              </p>
            </div>

            <!-- Security Notice -->
            <div class="security-notice">
              <div class="security-icon">
                <i class="fas fa-shield-exclamation"></i>
              </div>
              <p class="security-text">This portal is for authorized cafe staff only. All login attempts are monitored and logged for security purposes.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Back to Home -->
      <div class="back-home">
        <a href="{% url 'home' %}" class="back-home-link">
          <i class="fas fa-arrow-left"></i>
          Back to Homepage
        </a>
      </div>
    </div>
  </div>

  <!-- Font Awesome CDN for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    /* ============================================
           CAFE OWNER LOGIN PAGE STYLES
           ============================================ */
    
    /* === BASE LAYOUT === */
    .login-page-wrapper {
      position: relative;
      min-height: 100vh;
      overflow: hidden;
      background: linear-gradient(180deg, #1e293b 0%, #0f172a 50%, #1e293b 100%);
    }
    
    /* === HEADER ICON === */
    .icon-wrapper {
      position: relative;
      width: 100px;
      height: 100px;
      margin-bottom: 2rem;
      display: inline-block;
    }
    
    .icon-container {
      position: relative;
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #e94560 0%, #00d4aa 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
    }
    
    .cafe-owner-icon {
      background: linear-gradient(135deg, #e94560 0%, #00d4aa 100%);
    }
    
    .icon-wrapper:hover .icon-container {
      transform: scale(1.05);
    }
    
    .icon-container i {
      font-size: 2.5rem;
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    /* === PAGE TITLES === */
    .page-title {
      margin-top: 1.5rem;
      font-size: 2.5rem;
      font-weight: 700;
      color: white;
      letter-spacing: -0.025em;
      background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.75rem;
    }
    
    .page-subtitle {
      font-size: 0.9rem;
      color: rgba(203, 213, 225, 0.8);
      font-weight: 500;
      letter-spacing: 0.025em;
    }
    
    /* === LOGIN CARD === */
    .login-card {
      position: relative;
      background: rgba(30, 41, 59, 0.7);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(148, 163, 184, 0.1);
      border-radius: 1.5rem;
      padding: 2.5rem;
      overflow: hidden;
    }
    
    .card-shine {
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.03), transparent);
      transition: left 0.6s ease;
    }
    
    .login-card:hover .card-shine {
      left: 100%;
    }
    
    /* === ALERT MESSAGES === */
    .alert-message {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 1rem;
      border-radius: 0.75rem;
      margin-bottom: 1.5rem;
      animation: slideDown 0.3s ease;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    
    .alert-success {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    
    .alert-icon {
      flex-shrink: 0;
      margin-top: 0.125rem;
    }
    
    .alert-error .alert-icon {
      color: #f87171;
    }
    
    .alert-success .alert-icon {
      color: #4ade80;
    }
    
    .alert-text {
      font-size: 0.875rem;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.9);
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* === FORM GROUPS === */
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      font-size: 0.875rem;
      font-weight: 600;
      color: rgba(226, 232, 240, 0.95);
      letter-spacing: 0.01em;
    }
    
    .label-icon {
      font-size: 0.875rem;
      color: rgba(148, 163, 184, 0.7);
    }
    
    /* === INPUT WRAPPER === */
    .input-wrapper {
      position: relative;
    }
    
    .form-input {
      width: 100%;
      padding: 0.875rem 1rem;
      background: rgba(15, 23, 42, 0.6);
      border: 1.5px solid rgba(71, 85, 105, 0.4);
      border-radius: 0.75rem;
      color: white;
      font-size: 0.9375rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      outline: none;
    }
    
    .form-input:focus {
      background: rgba(15, 23, 42, 0.8);
      border-color: rgba(99, 102, 241, 0.6);
      transform: translateY(-1px);
    }
    
    .form-input:hover:not(:focus) {
      border-color: rgba(100, 116, 139, 0.6);
      background: rgba(15, 23, 42, 0.7);
    }
    
    .form-input::placeholder {
      color: rgba(148, 163, 184, 0.5);
    }
    
    .input-focus-ring {
      position: absolute;
      inset: -2px;
      border-radius: 0.75rem;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      background: linear-gradient(135deg, #e94560, #00d4aa);
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      padding: 2px;
    }
    
    .form-input:focus ~ .input-focus-ring {
      opacity: 0.3;
    }
    
    /* === PASSWORD TOGGLE === */
    .password-toggle-btn {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      padding: 0.5rem;
      background: none;
      border: none;
      color: rgba(148, 163, 184, 0.7);
      cursor: pointer;
      transition: all 0.2s ease;
      border-radius: 0.375rem;
      z-index: 10;
    }
    
    .password-toggle-btn:hover {
      color: rgba(226, 232, 240, 0.9);
      background: rgba(255, 255, 255, 0.05);
      transform: translateY(-50%) scale(1.1);
    }
    
    .password-toggle-btn:active {
      transform: translateY(-50%) scale(0.95);
    }
    
    /* === FORM ERRORS === */
    .form-error {
      display: flex;
      align-items: center;
      gap: 0.375rem;
      margin-top: 0.5rem;
      font-size: 0.8125rem;
      color: #f87171;
      animation: shake 0.3s ease;
    }
    
    @keyframes shake {
      0%,
      100% {
        transform: translateX(0);
      }
      25% {
        transform: translateX(-5px);
      }
      75% {
        transform: translateX(5px);
      }
    }
    
    /* === SUBMIT BUTTON === */
    .submit-button {
      position: relative;
      width: 100%;
      padding: 1rem 1.5rem;
      background: linear-gradient(135deg, #e94560 0%, #00d4aa 100%);
      border: none;
      border-radius: 0.75rem;
      color: white;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .submit-button:hover:not(:disabled) {
      transform: translateY(-2px);
    }
    
    .submit-button:active:not(:disabled) {
      transform: translateY(0);
    }
    
    .submit-button:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none !important;
    }
    
    .submit-content,
    .submit-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.625rem;
    }
    
    .submit-loading.hidden {
      display: none;
    }
    
    .button-shine {
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    }
    
    .submit-button:hover:not(:disabled) .button-shine {
      animation: buttonShine 1s ease;
    }
    
    @keyframes buttonShine {
      to {
        left: 100%;
      }
    }
    
    .spinner {
      width: 1.25rem;
      height: 1.25rem;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
    
    /* === SIGNUP PROMPT === */
    .signup-prompt {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(71, 85, 105, 0.3);
      text-align: center;
    }
    
    .signup-prompt p {
      font-size: 0.875rem;
      color: rgba(203, 213, 225, 0.8);
    }
    
    .signup-link {
      color: #a78bfa;
      font-weight: 600;
      text-decoration: underline;
      text-decoration-color: rgba(167, 139, 250, 0.3);
      text-underline-offset: 2px;
      transition: color 0.2s ease;
    }
    
    .signup-link:hover {
      color: #c4b5fd;
      text-decoration-color: rgba(196, 181, 253, 0.5);
    }
    
    /* === SECURITY NOTICE === */
    .security-notice {
      display: flex;
      gap: 0.875rem;
      padding: 1rem;
      margin-top: 1.5rem;
      background: rgba(234, 179, 8, 0.08);
      border: 1px solid rgba(234, 179, 8, 0.25);
      border-radius: 0.75rem;
    }
    
    .security-icon {
      flex-shrink: 0;
      color: #fbbf24;
      font-size: 1.125rem;
      margin-top: 0.125rem;
    }
    
    .security-text {
      font-size: 0.8125rem;
      color: rgba(254, 243, 199, 0.9);
      line-height: 1.6;
    }
    
    /* === BACK HOME LINK === */
    .back-home {
      margin-top: 2.5rem;
      text-align: center;
    }
    
    .back-home-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      background: rgba(30, 41, 59, 0.4);
      border: 1px solid rgba(71, 85, 105, 0.3);
      border-radius: 0.75rem;
      color: rgba(226, 232, 240, 0.9);
      font-size: 0.875rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .back-home-link:hover {
      background: rgba(51, 65, 85, 0.6);
      color: white;
      border-color: rgba(100, 116, 139, 0.5);
      transform: translateX(-4px);
    }
    
    .back-home-link i {
      transition: transform 0.3s ease;
    }
    
    .back-home-link:hover i {
      transform: translateX(-4px);
    }
    
    /* === RESPONSIVE DESIGN === */
    @media (max-width: 640px) {
      .login-card {
        padding: 2rem 1.5rem;
      }
    
      .page-title {
        font-size: 2rem;
      }
    
      .icon-wrapper,
      .icon-container {
        width: 80px;
        height: 80px;
      }
    
      .icon-container i {
        font-size: 2rem;
      }
    
      .form-input {
        font-size: 16px; /* Prevents zoom on iOS */
      }
    }
    
    /* === ACCESSIBILITY === */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    @media (prefers-contrast: high) {
      .login-card {
        border-width: 2px;
        border-color: rgba(255, 255, 255, 0.3);
      }
    
      .form-input {
        border-width: 2px;
      }
    
      .form-label {
        font-weight: 700;
      }
    }
  </style>

  <script>
    // Password Toggle Function
    function togglePassword() {
      const passwordInput = document.getElementById('{{ form.password.id_for_label }}')
      const toggleIcon = document.getElementById('toggleIcon')
    
      if (!passwordInput || !toggleIcon) return
    
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text'
        toggleIcon.classList.remove('fa-eye')
        toggleIcon.classList.add('fa-eye-slash')
      } else {
        passwordInput.type = 'password'
        toggleIcon.classList.remove('fa-eye-slash')
        toggleIcon.classList.add('fa-eye')
      }
    }
    
    // Enhanced Form Submission Handling
    document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('login-form')
      const submitBtn = document.getElementById('submit-btn')
      const usernameInput = document.getElementById('{{ form.username.id_for_label }}')
      const passwordInput = document.getElementById('{{ form.password.id_for_label }}')
    
      // Form validation and submission
      if (form && submitBtn) {
        // Function to check if form is valid
        function validateForm() {
          const isValid = usernameInput && passwordInput && usernameInput.value.trim() && passwordInput.value.trim()
          submitBtn.disabled = !isValid
          if (!isValid) {
            submitBtn.style.opacity = '0.5'
            submitBtn.style.cursor = 'not-allowed'
          } else {
            submitBtn.style.opacity = '1'
            submitBtn.style.cursor = 'pointer'
          }
        }
    
        // Initial validation check
        validateForm()
    
        // Validate on input
        if (usernameInput) usernameInput.addEventListener('input', validateForm)
        if (passwordInput) passwordInput.addEventListener('input', validateForm)
    
        form.addEventListener('submit', function (e) {
          // Basic client-side validation
          if (!usernameInput.value.trim() || !passwordInput.value.trim()) {
            e.preventDefault()
            return
          }
    
          // Disable button and grey it out
          submitBtn.disabled = true
          submitBtn.style.opacity = '0.5'
          submitBtn.style.cursor = 'not-allowed'
        })
      }
    
      // Enhanced input focus effects
      const inputs = document.querySelectorAll('.form-input')
      inputs.forEach((input) => {
        // Add subtle animation on focus
        input.addEventListener('focus', function () {
          this.parentElement.style.transform = 'scale(1.005)'
        })
    
        input.addEventListener('blur', function () {
          this.parentElement.style.transform = 'scale(1)'
        })
      })
    
      // Auto-focus first input if empty
      if (usernameInput && !usernameInput.value) {
        setTimeout(() => usernameInput.focus(), 300)
      }
    
      // Auto-dismiss alert messages after 3 seconds
      const alertMessages = document.querySelectorAll('.alert-message, .alert')
      if (alertMessages.length > 0) {
        alertMessages.forEach((alert) => {
          setTimeout(() => {
            alert.style.opacity = '0'
            alert.style.transform = 'translateY(-10px)'
            setTimeout(() => {
              alert.remove()
            }, 300) // Wait for fade out animation
          }, 3000) // 3 seconds delay
        })
      }
    })
    
    // Accessibility: Announce form errors to screen readers
    window.addEventListener('load', function () {
      const errorMessages = document.querySelectorAll('.form-error')
      if (errorMessages.length > 0) {
        const announcement = document.createElement('div')
        announcement.setAttribute('aria-live', 'polite')
        announcement.setAttribute('aria-atomic', 'true')
        announcement.style.position = 'absolute'
        announcement.style.left = '-10000px'
        announcement.textContent = 'Form has validation errors. Please check the highlighted fields.'
        document.body.appendChild(announcement)
    
        setTimeout(() => {
          document.body.removeChild(announcement)
        }, 3000)
      }
    })
  </script>
{% endblock %}
<div class="min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8" style="background: linear-gradient(to bottom right, #f8fafc, #e2e8f0);">
  <div class="sm:mx-auto sm:w-full sm:max-w-md">
    <!-- Header -->
    <div class="text-center">
      <div class="mx-auto h-16 w-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform duration-200">
        <i class="bi bi-briefcase text-white text-2xl"></i>
      </div>
      <h2 class="mt-8 text-center text-3xl font-bold text-gray-900 tracking-tight">Cafe Owner Portal</h2>
      <p class="mt-3 text-center text-sm text-gray-600">Manage your gaming cafe operations with ease</p>
    </div>
  </div>

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-md">
    <div class="bg-white py-10 px-6 shadow-xl border border-gray-100 sm:rounded-2xl sm:px-12 backdrop-blur-sm">
      <!-- Messages -->
      {% if messages %}
        <div class="mb-8">
          {% for message in messages %}
            <div class="rounded-xl p-4 {% if message.tags == 'error' %}
                
                bg-red-50 border border-red-100 shadow-sm

              {% else %}
                
                bg-green-50 border border-green-100 shadow-sm

              {% endif %} animate-fade-in">
              <div class="flex">
                <div class="flex-shrink-0">
                  <i class="bi {% if message.tags == 'error' %}
                      
                      bi-exclamation-circle text-red-500

                    {% else %}
                      
                      bi-check-circle text-green-500

                    {% endif %} text-lg">

                  </i>
                </div>
                <div class="ml-3">
                  <p class="text-sm font-medium {% if message.tags == 'error' %}
                      
                      text-red-800

                    {% else %}
                      
                      text-green-800

                    {% endif %}">{{ message }}</p>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Form -->
      <form class="space-y-7" method="post" id="login-form">
        {% csrf_token %}

        <div class="group">
          <label for="{{ form.username.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">{{ form.username.label }}</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i class="bi bi-person text-gray-400 group-focus-within:text-indigo-500 transition-colors duration-200"></i>
            </div>
            <input id="{{ form.username.id_for_label }}" name="{{ form.username.name }}" type="text" autocomplete="username" required class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent sm:text-sm transition-all duration-200 hover:border-gray-400" placeholder="Enter your username" value="{{ form.username.value|default:'' }}" />
          </div>
          {% if form.username.errors %}
            <p class="mt-2 text-sm text-red-600 flex items-center">
              <i class="bi bi-exclamation-circle mr-1"></i>
              {{ form.username.errors.0 }}
            </p>
          {% endif %}
        </div>

        <div class="group">
          <label for="{{ form.password.id_for_label }}" class="block text-sm font-semibold text-gray-700 mb-2">{{ form.password.label }}</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <i class="bi bi-lock text-gray-400 group-focus-within:text-indigo-500 transition-colors duration-200"></i>
            </div>
            <input id="{{ form.password.id_for_label }}" name="{{ form.password.name }}" type="password" autocomplete="current-password" required class="block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent sm:text-sm transition-all duration-200 hover:border-gray-400" placeholder="Enter your password" />
            <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-gray-50 rounded-r-xl transition-colors duration-200" onclick="togglePassword()"><i class="bi bi-eye text-gray-400 hover:text-indigo-500 transition-colors duration-200" id="toggleIcon"></i></button>
          </div>
          {% if form.password.errors %}
            <p class="mt-2 text-sm text-red-600 flex items-center">
              <i class="bi bi-exclamation-circle mr-1"></i>
              {{ form.password.errors.0 }}
            </p>
          {% endif %}
        </div>

        <!-- Form-wide errors -->
        {% if form.non_field_errors %}
          <div class="rounded-xl p-4 bg-red-50 border border-red-100 shadow-sm">
            <div class="flex">
              <div class="flex-shrink-0">
                <i class="bi bi-exclamation-circle text-red-500 text-lg"></i>
              </div>
              <div class="ml-3">
                <p class="text-sm font-medium text-red-800">{{ form.non_field_errors.0 }}</p>
              </div>
            </div>
          </div>
        {% endif %}

        <div class="pt-2">
          <button type="submit" id="submit-btn" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform hover:scale-[1.02] transition-all duration-200 shadow-lg hover:shadow-xl">
            <span id="submit-text" class="flex items-center">
              <i class="bi bi-arrow-right-circle mr-2"></i>
              Access Dashboard
            </span>
            <span id="submit-loading" class="hidden flex items-center">
              <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>Signing in...
            </span>
          </button>
        </div>
      </form>

      <!-- Links -->
      <div class="mt-8">
        <div class="relative">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-200"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-4 bg-white text-gray-500 font-medium">Quick Access</span>
          </div>
        </div>

        <div class="mt-6 grid grid-cols-2 gap-4">
          <a href="{% url 'authentication:customer_login' %}" class="group w-full inline-flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 hover:shadow-md transition-all duration-200 transform hover:scale-105">
            <i class="bi bi-person text-gray-500 group-hover:text-indigo-500 mr-2 transition-colors duration-200"></i>
            Customer
          </a>
          <a href="{% url 'authentication:superuser_login' %}" class="group w-full inline-flex justify-center items-center py-3 px-4 border border-gray-200 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 hover:shadow-md transition-all duration-200 transform hover:scale-105">
            <i class="bi bi-shield-lock text-gray-500 group-hover:text-indigo-500 mr-2 transition-colors duration-200"></i>
            Staff Portal
          </a>
        </div>
      </div>

      <!-- Registration Link -->
      <div class="mt-8 text-center">
        <p class="text-sm text-gray-600">
          Need an account?
          <a href="{% url 'authentication:cafe_owner_register' %}" class="font-semibold text-indigo-600 hover:text-indigo-500 transition-colors duration-200">Register here</a>
        </p>
      </div>

      <!-- Security Notice -->
      <div class="mt-8 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl shadow-sm">
        <div class="flex">
          <div class="flex-shrink-0">
            <i class="bi bi-shield-exclamation text-amber-500 text-lg"></i>
          </div>
          <div class="ml-3">
            <h3 class="text-sm font-semibold text-amber-800">Security Notice</h3>
            <div class="mt-2 text-sm text-amber-700">
              <p>This portal is for authorized cafe staff only. All login attempts are monitored and logged for security purposes.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Back to Home -->
    <div class="mt-8 text-center">
      <a href="{% url 'home' %}" class="inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200 group">
        <i class="bi bi-arrow-left mr-2 group-hover:-translate-x-1 transition-transform duration-200"></i>
        Back to Home
      </a>
    </div>
  </div>
</div>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }
  
  /* Form focus effects */
  .group:focus-within label {
    color: #4f46e5;
  }
  
  /* Loading button animation */
  #submit-btn:disabled {
    opacity: 0.7;
    transform: scale(0.98);
  }
  
  /* Smooth hover effects */
  .hover\:scale-105:hover {
    --tw-scale-x: 1.05;
    --tw-scale-y: 1.05;
    transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
  }
  
  .hover\:scale-\[1\.02\]:hover {
    --tw-scale-x: 1.02;
    --tw-scale-y: 1.02;
    transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
  }
  
  /* Custom backdrop blur for modern look */
  .backdrop-blur-sm {
    backdrop-filter: blur(4px);
  }
</style>

<script>
  function togglePassword() {
    const passwordInput = document.getElementById('{{ form.password.id_for_label }}')
    const toggleIcon = document.getElementById('toggleIcon')
  
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text'
      toggleIcon.classList.remove('bi-eye')
      toggleIcon.classList.add('bi-eye-slash')
    } else {
      passwordInput.type = 'password'
      toggleIcon.classList.remove('bi-eye-slash')
      toggleIcon.classList.add('bi-eye')
    }
  }
  
  // Enhanced form submission with better UX
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('login-form')
    const submitBtn = document.getElementById('submit-btn')
    const submitText = document.getElementById('submit-text')
    const submitLoading = document.getElementById('submit-loading')
  
    if (form && submitBtn) {
      form.addEventListener('submit', function (e) {
        submitBtn.disabled = true
        submitText.classList.add('hidden')
        submitLoading.classList.remove('hidden')
  
        // Add gentle shake animation on error (if needed)
        setTimeout(() => {
          if (document.querySelector('.text-red-600')) {
            submitBtn.disabled = false
            submitText.classList.remove('hidden')
            submitLoading.classList.add('hidden')
          }
        }, 2000)
      })
    }
  
    // Add focus ring animations
    const inputs = document.querySelectorAll('input')
    inputs.forEach((input) => {
      input.addEventListener('focus', function () {
        this.parentElement.classList.add('ring-2', 'ring-indigo-500')
      })
  
      input.addEventListener('blur', function () {
        this.parentElement.classList.remove('ring-2', 'ring-indigo-500')
      })
    })
  
    // Add page load animation
    document.body.style.opacity = '0'
    setTimeout(() => {
      document.body.style.transition = 'opacity 0.3s ease-in-out'
      document.body.style.opacity = '1'
    }, 100)
  })
</script>
{% endblock %}
